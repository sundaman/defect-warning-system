# å·¥ä¸šç¼ºé™·é¢„è­¦ç³»ç»Ÿå¼€å‘ä»»åŠ¡æ¸…å•

## é˜¶æ®µä¸€ï¼šéœ€æ±‚åˆ†æä¸æ¶æ„è®¾è®¡ ğŸ“‹
- [x] ç†è§£ç®—æ³•åŸç†ä¸ä»£ç ç»“æ„
- [x] è¯„ä¼°å…¨å±€å‚æ•°å¯è¡Œæ€§
- [x] è®¾è®¡é€šç”¨æ•°æ®æ¥å…¥æ¥å£ (MES)
- [x] è®¾è®¡æŠ¥è­¦è¾“å‡ºæ¥å£
- [x] è®¾è®¡è¿ç»´ç®¡ç†ç«¯åŸå‹ä¸æ¥å£
- [x] ç¼–å†™è¯¦ç»†è®¾è®¡æ–¹æ¡ˆä¸å®æ–½è®¡åˆ’

## é˜¶æ®µäºŒï¼šæ ¸å¿ƒå¼•æ“å¼€å‘ ğŸš€
- [x] æ„å»ºè‡ªé€‚åº”æ£€æµ‹å¼•æ“æ ¸å¿ƒ
- [x] å®ç°å¤šç»´åº¦æ£€æµ‹é¡¹å¹¶å‘å¤„ç†
- [x] å¼€å‘æ•°æ®ç¼“å­˜æ¨¡å—ï¼ˆç”¨äºæä¾›æŠ¥è­¦å‰åèƒŒæ™¯æ•°æ®ï¼‰
- [x] å®ç°å‚æ•°è‡ªåŠ¨æŒä¹…åŒ–ä¸åŠ è½½æœºåˆ¶

## é˜¶æ®µä¸‰ï¼šAPI ä¸è¿ç»´ç³»ç»Ÿå¼€å‘ ğŸ’»
- [x] å¼€å‘ MES æ•°æ®æ¥å…¥ API
- [x] å¼€å‘è¿ç»´ç®¡ç†å‰ç«¯ API (é¡¹ç›®ç»´æŠ¤ã€å‚æ•°è®¾ç½®)
- [x] å¼€å‘æŠ¥è­¦æ¨é€æœåŠ¡ (æ¨¡æ‹Ÿå®ç°)
- [x] å¼€å‘æœåŠ¡çŠ¶æ€ç›‘æ§æ¨¡å—

## é˜¶æ®µå››ï¼šéƒ¨ç½²ä¸éªŒè¯ ğŸ› ï¸
- [x] Docker å®¹å™¨åŒ–é…ç½®
- [x] ç¼–å†™å•å…ƒæµ‹è¯•ä¸æ¨¡æ‹Ÿå¹¶å‘æµ‹è¯•
- [x] æ’°å†™æ¥å£æ–‡æ¡£
- [x] ç³»ç»Ÿæ¼”ç¤ºä¸äº¤ä»˜

## é˜¶æ®µäº”ï¼šç³»ç»Ÿå¯¹é½ä¸éªŒè¯ (æ–°å¢) âš–ï¸
- [x] ç¼–å†™ç®—æ³•ä¸€è‡´æ€§éªŒè¯è„šæœ¬
- [x] æ‰§è¡Œ [defect_test_data_v2.csv](file:///Users/luxsan-ict/.opencode/Defect%20Early%20Warning/data/generated/defect_test_data_v2.csv) å¯¹é½æµ‹è¯•
- [x] ç”Ÿæˆå·®å¼‚åˆ†ææŠ¥å‘Š

## é˜¶æ®µå…­ï¼šç®—æ³•å‚æ•°è°ƒä¼˜ ğŸ›ï¸
- [x] ä¿®æ”¹ [AdaptiveCUSUMDetector](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/adaptive_cusum.py#9-363) æ”¯æŒ `penalty_strength`
- [x] æ›´æ–° API æ¥å£æ”¯æŒé…ç½®ä¸‹å‘
- [x] æ›´æ–°äº¤ä»˜æ–‡æ¡£åµŒå…¥å‚æ•°è¯´æ˜å›¾

## é˜¶æ®µä¸ƒï¼šè¿ç»´çœ‹æ¿ä¸åŠŸèƒ½å¢å¼º ğŸ“Š
- [x] **æ•°æ®å±‚**ï¼šå¼•å…¥ SQLite æ•°æ®åº“ï¼ŒæŒä¹…åŒ–å­˜å‚¨æ£€æµ‹å†å²æ•°æ®
- [x] **ç®—æ³•å±‚**ï¼šæ”¯æŒ `cooldown_periods` å‚æ•°é…ç½®åŒ–
- [x] **APIå±‚**ï¼šå¼€å‘ `GET /api/v1/history` æ¥å£ (æ”¯æŒæ—¶é—´/é¡¹ç›®ç­›é€‰)
- [x] **å‰ç«¯**ï¼šå¼€å‘å¯è§†åŒ– Dashboard (ä½¿ç”¨ EChartsï¼Œæ”¯æŒå¤šå›¾è”åŠ¨)

## éªŒè¯ä¸å‹åŠ›æµ‹è¯• (Post-Dev) âœ…
- [x] æ‰§è¡Œ 10,000 æ¡çœŸå®æµ‹è¯•æ•°æ®çš„å…¨é“¾è·¯å›æ”¾ (API -> DB -> Dashboard)
- [x] éªŒè¯é«˜å¹¶å‘æ•°æ®æ³¨å…¥ä¸‹çš„ç³»ç»Ÿç¨³å®šæ€§ (Success: 100%)

## é˜¶æ®µå…«ï¼šçœ‹æ¿è¯¦æƒ…äº¤äº’ä¸å¤šç»´ç­›é€‰ ğŸ–¥ï¸
- [x] **æ•°æ®åº“**ï¼šå‡çº§ [DetectionRecord](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/db/models.py#7-56) æ¨¡å‹ï¼Œå¢åŠ  `station/product/line` å­—æ®µ
- [x] **API**ï¼šæ›´æ–° [DataIngestRequest](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#56-63) å’Œ [history](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#388-427) æ¥å£æ”¯æŒæ–°å­—æ®µ
- [x] **å‰ç«¯**ï¼šå¢åŠ  Station/Product/Line ç­›é€‰æ 
- [x] **äº¤äº’**ï¼šå®ç°é¢„è­¦è®°å½•ç‚¹å‡»å¼¹çª— (Context Modal)ï¼Œå±•ç¤ºå‰å30å‘¨æœŸè¶‹åŠ¿

## æœ€ç»ˆéªŒæ”¶ä¸é—®é¢˜ä¿®å¤ (Final Fixes) ğŸ”§
- [x] ä¿®å¤æŠ¥è­¦æ—¶ CUSUM å½’é›¶çš„ Bug ([adaptive_cusum.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/adaptive_cusum.py))
- [x] ä¼˜åŒ–å¼¹çª—æŸ¥è¯¢èŒƒå›´è‡³ 48 å°æ—¶ï¼Œç¡®ä¿å±•ç¤ºå®Œæ•´è¶‹åŠ¿ ([index.html](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/web/index.html))
- [x] é‡æ–°æ³¨å…¥ 10,000 æ¡æ•°æ®å¹¶éªŒè¯æ‰€æœ‰ä¿®å¤ç”Ÿæ•ˆ

## é˜¶æ®µä¹ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ– (UX Improvements) ğŸ¨
- [x] **æ•°æ®åº“**ï¼šä¸ºç­›é€‰å­—æ®µ (`station`, `product`, `line`) æ·»åŠ ç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢
- [x] **API**ï¼šå¼€å‘ `/api/v1/options` æ¥å£ï¼Œæä¾›åŠ¨æ€ç­›é€‰é¡¹
- [x] **å‰ç«¯**ï¼šå°†è¾“å…¥æ¡†å‡çº§ä¸ºåŠ¨æ€ä¸‹æ‹‰èœå• (Select/Datalist)

## é˜¶æ®µåï¼šå‚æ•°é…ç½®ç®¡ç†åŠŸèƒ½ (Configuration Management) âš™ï¸
- [x] éªŒè¯é…ç½®çƒ­æ›´æ–°æœºåˆ¶ (Config Hot Reload) <!-- id: 11 -->
    - [x] ç¼–å†™éªŒè¯è„šæœ¬ [scripts/verify_config_hot_reload.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/scripts/verify_config_hot_reload.py)
    - [x] è°ƒè¯•è§£å†³ `h_value` ä¸æ›´æ–°çš„é—®é¢˜ (Added property setters & recalculation)
    - [x] ä¿®å¤ API è·¯ç”±ä¼˜å…ˆçº§é—®é¢˜ (Global config shadowed by Item config)

## é˜¶æ®µåäºŒï¼šç›‘æ§é¡¹ç®¡ç†ä¸ä½“éªŒä¼˜åŒ– (Item Management & UX) ğŸš€
- [x] åç«¯å®ç° Delete Item åŠŸèƒ½ <!-- id: 12 -->
    - [x] [persistence.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/utils/persistence.py): update [delete_item_config](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/utils/persistence.py#33-37)
    - [x] [manager.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/manager.py): update [remove_detector](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/manager.py#64-69)
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): add DELETE endpoint
- [x] å‰ç«¯ UI æ”¹è¿›
    - [x] Import Modal: Rename tabs to "æ–‡æœ¬ç²˜è´´" / "æ–‡ä»¶ä¸Šä¼ "
    - [x] Item List: Add Search/Filter input
    - [x] Item List: Add Delete button and logic

## é˜¶æ®µåä¸‰ï¼šé«˜çº§å‚æ•°é…ç½® (Advanced Parameters) ğŸ› ï¸
- [x] åç«¯æ”¯æŒåŠ¨æ€ä¿®æ”¹ `mu0` å’Œ `monitoring_side` <!-- id: 13 -->
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): Update [ItemConfigUpdate](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#208-216) model
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): Update [update_item_config](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#267-292) logic
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): Update [GlobalConfigUpdate](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#229-234) for `monitoring_side`
    - [x] [manager.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/manager.py): Apply global `monitoring_side` in [get_or_create_detector](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/manager.py#33-63)
- [x] å‰ç«¯ UI æ”¯æŒ
    - [x] Edit Modal: Add `mu0` input
    - [x] Edit Modal: Add `monitoring_side` select (Upper/Lower/Both)
    - [x] Item List: Display `monitoring_side`
    - [x] Global Config: Add `monitoring_side` selector

## é˜¶æ®µåå››ï¼šå…¨å±€é…ç½®é‡æ„ä¸å¼•å¯¼å¼å¯¼å…¥ (Refactor Global Config & Guided Import) ğŸ›¡ï¸
- [x] åç«¯é€»è¾‘é‡æ„ <!-- id: 14 -->
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): [update_global_config](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py#235-266) stops propagating changes to active detectors (Default only).
    - [x] [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py): `batch-import` accepts `config_overrides`.
- [x] å‰ç«¯äº¤äº’é‡æ„
    - [x] Import Modal: Add "Batch Configuration" section (collapsible).
    - [x] Import Modal: Populate with current Default Config.
    - [x] UI: Rename "Global Policy" to "Default Policy (For New Items)".
- [x] **åç«¯**ï¼šå®ç° `/api/v1/configs` GET/PUT æ¥å£
- [x] **å‰ç«¯**ï¼šå®ç° SPA å¯¼èˆªæ ä¸ Dashboard/Configuration è§†å›¾åˆ‡æ¢
- [x] **å‰ç«¯**ï¼šå¼€å‘é…ç½®åˆ—è¡¨è¡¨æ ¼ä¸ç¼–è¾‘å¼¹çª—
- [x] **é›†æˆ**ï¼šéªŒè¯å‚æ•°ä¿®æ”¹çš„å®æ—¶ç”Ÿæ•ˆæ€§

## é˜¶æ®µåä¸€ï¼šç›‘æ§é¡¹ç®¡ç†ä¸å…¨å±€ç­–ç•¥ä¼˜åŒ– (Item Management & Global Policy) ğŸš€
- [x] **API**ï¼šå®ç° `PUT /api/v1/configs/global` å…¨å±€ç­–ç•¥æ›´æ–°æ¥å£
- [x] **API**ï¼šå®ç° `POST /api/v1/items/batch-import` æ‰¹é‡å¯¼å…¥æ¥å£
- [x] **å‰ç«¯**ï¼šé‡æ„é…ç½®é¡µï¼Œç½®é¡¶ Global Config è®¾ç½®
- [x] **å‰ç«¯**ï¼šå®ç°å¯¼å…¥æ¨¡æ€æ¡† (æ”¯æŒæ–‡æœ¬ç²˜è´´å’Œ CSV ä¸Šä¼ )
- [x] **é›†æˆ**ï¼šéªŒè¯æ‰¹é‡å¯¼å…¥åçš„è‡ªåŠ¨é…ç½®åº”ç”¨
- [ ] **UIä¼˜åŒ–**ï¼šå®Œå–„ Default Policy é¢æ¿
    - [x] æ‹†åˆ† Cooldown å’Œ Side ä¸ºç‹¬ç«‹è®¾ç½®é¡¹
    - [x] å¢åŠ æ¯ä¸ªå‚æ•°çš„è¯¦ç»†è¯´æ˜ä¸ä½¿ç”¨å»ºè®®
    - [x] æ˜¾ç¤ºé¢„ä¼° h å€¼ (Based on Shift & ARL0)
- [x] **åŠŸèƒ½æ‰©å±•**ï¼šç›‘æ§é¡¹åˆ é™¤åŠŸèƒ½
    - [x] åç«¯ï¼šå®ç° `DELETE /api/v1/configs/{item_name}`
    - [x] åç«¯ï¼šå®ç° `POST /api/v1/configs/batch-delete`
    - [x] å‰ç«¯ï¼šå®ç°å•é¡¹åˆ é™¤æŒ‰é’®ä¸ç¡®è®¤
    - [x] å‰ç«¯ï¼šå®ç°å¤šé€‰ä¸æ‰¹é‡åˆ é™¤
- [x] **è¿ç»´ç‰¹æ€§**ï¼šæ•°æ®ä¿ç•™ç­–ç•¥
    - [x] åç«¯ï¼šå®ç° `cleanup_old_data` å®šæ—¶ä»»åŠ¡ (ä¿ç•™30å¤©)
    - [x] å¯åŠ¨é¡¹ï¼šåœ¨ [main.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/api/main.py) startup äº‹ä»¶ä¸­æŒ‚è½½
- [x] **ç®—æ³•ä¼˜åŒ–**ï¼šå‚æ•°ç±»å†·å¯åŠ¨é…ç½®
    - [x] æ ¸å¿ƒï¼šå°† Cold Start é»˜è®¤ Std ä» 1.0 è°ƒæ•´ä¸º 3.0 (Hardcoded)
- [x] **ç³»ç»Ÿå¥å£®æ€§**ï¼šç®—æ³•çŠ¶æ€æŒä¹…åŒ– (SQLiteæ–¹æ¡ˆ)
    - [x] æ¨¡å‹ï¼š[models.py](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/db/models.py) æ–°å¢ [ItemState](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/db/models.py#57-88) è¡¨
    - [x] æ ¸å¿ƒï¼š[AdaptiveKUpdater](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/k_updater.py#21-280) æ”¯æŒçŠ¶æ€å¯¼å‡º/å¯¼å…¥ (std, k)
    - [x] æ ¸å¿ƒï¼š[AdaptiveCUSUMDetector](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/core/adaptive_cusum.py#9-363) æ”¯æŒçŠ¶æ€å¯¼å‡º/å¯¼å…¥ (baseline, S+, S-)
    - [x] å­˜å‚¨ï¼š[ConfigStore](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/utils/persistence.py#5-48) æ”¹ä¸ºæ“ä½œ DB [load_all_item_states](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/utils/persistence.py#54-75) / [save_item_states](file:///Users/luxsan-ict/.gemini/antigravity/scratch/defect_warning_system/src/utils/persistence.py#76-108)
    - [x] è°ƒåº¦ï¼šå®ç°æ¯æ—¥è‡ªåŠ¨å­˜æ¡£ & æœåŠ¡å…³é—­æ—¶å­˜æ¡£
    - [x] å¯åŠ¨ï¼šæœåŠ¡å¯åŠ¨æ—¶å°è¯•æ¢å¤å†å²çŠ¶æ€

## é˜¶æ®µåäº”ï¼šå…ƒæ•°æ®éš”ç¦»ä¸UIé‡æ„ (Metadata Separation & UI Revamp) ğŸ·ï¸
- [x] **æ ¸å¿ƒæ¶æ„**ï¼šæ”¯æŒ Product/Line/Station å¤åˆé”® <!-- id: 18 -->
    - [x] åç«¯ï¼šæ›´æ–° `_generate_detector_key` æ”¯æŒå…ƒæ•°æ®ç»„åˆ
    - [x] åç«¯ï¼šä¿®å¤åç«¯é…ç½®æŒä¹…åŒ–æ—¶çš„å…ƒæ•°æ®ä¸¢å¤±é—®é¢˜ (Fix persistence bug)
    - [x] å­˜å‚¨ï¼šç¡®ä¿ `meta_data` å­—æ®µæ­£ç¡®å†™å…¥ `item_configs.json`
- [x] **é…ç½®åˆ—è¡¨ä¼˜åŒ– (Config List UI)** ğŸ¨
    - [x] å¸ƒå±€é‡æ„ï¼šåˆ†ç¦»è¿‡æ»¤å™¨è¡Œä¸æ“ä½œæŒ‰é’®
    - [x] åŠŸèƒ½ï¼šå¢åŠ  Product/Line/Station ç‹¬ç«‹æœç´¢æ¡†
    - [x] ä¿®å¤ï¼šè§£å†³è¿‡æ»¤å™¨å˜é‡å†²çªå¯¼è‡´çš„åˆ—è¡¨ç©ºç™½é—®é¢˜
    - [x] æ˜¾ç¤ºï¼šåˆ—è¡¨æ­£ç¡®è§£æå¹¶æ˜¾ç¤º Metadata åˆ— (Uppercase)
    - [x] äº¤äº’ï¼šå¢åŠ  "Clear Filters" åŠŸèƒ½
- [x] **å¯¼å…¥åŠŸèƒ½å¢å¼º**
    - [x] UIï¼šå¢åŠ  Product/Line/Station å¿…å¡«è¾“å…¥æ¡†
    - [x] éªŒè¯ï¼šæ·»åŠ å¿…å¡«é¡¹æ ¡éªŒé€»è¾‘
    - [x] æ¥å£ï¼šå¯¹æ¥åç«¯ `batch-import` ä¼ è¾“å…ƒæ•°æ®
- [x] **æ–‡æ¡£æ›´æ–°** ğŸ“š
    - [x] æ›´æ–° `TECHNICAL_HANDBOOK.md` åŒ…å«ç¬¬6ç«  "å…ƒæ•°æ®åŒ¹é…ä¸éš”ç¦»"
    - [x] æ˜ç¡® MES æ¥å£è§„èŒƒä¸æœ€ä½³å®è·µ
